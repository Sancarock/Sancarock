<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<style>
  body {
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    height: 100vh;
    background: transparent;
    font-family: sans-serif;
  }

  #controls {
    margin-top: 10px;
  }

  button {
    background: #222;
    color: #fff;
    border: none;
    border-radius: 8px;
    font-size: 18px;
    padding: 6px 12px;
    margin: 0 5px;
    cursor: pointer;
    transition: 0.3s;
  }

  button:hover {
    background: #555;
  }

  #volumeDisplay {
    margin-top: 6px;
    font-size: 14px;
    color: #ccc;
  }
</style>
</head>
<body>
  <div id="muse-player"></div>

  <div id="controls">
    <button onClick="changeVolume(-10)">âˆ’</button>
    <button onClick="changeVolume(10)">+</button>
    <div id="volumeDisplay">Volume: 100%</div>
  </div>

  <script src="https://hosted.muses.org/mrp.js"></script>
  <script>
    let volume = 100; // volume inicial

    // inicia o player
    MRP.insert({
      'url': 'https://s02.transmissaodigital.com:6716/stream',
      'codec': '',
      'volume': volume,
      'autoplay': true,
      'forceHTML5': true,
      'jsevents': false,
      'buffering': 0,
      'title': 'SancaRock',
      'wmode': 'transparent',
      'skin': 'abrahadabra2',
      'width': 100,
      'height': 141,
      'container': 'muse-player'
    });

    // funÃ§Ã£o para aumentar/diminuir o volume
    function changeVolume(delta) {
      volume = Math.max(0, Math.min(100, volume + delta)); // mantÃ©m entre 0 e 100
      MRP.setVolume(volume);
      document.getElementById('volumeDisplay').innerText = `Volume: ${volume}%`;
    }
  </script>
  <script>
// ======= DETECTOR DE CONEXÃƒO AUTOMÃTICO =======

// cria uma mensagem visual simples quando cair a internet
const aviso = document.createElement('div');
aviso.id = 'offlineAviso';
aviso.textContent = 'Sem conexÃ£o... tentando reconectar ðŸ”„';
aviso.style.position = 'fixed';
aviso.style.top = '20px';
aviso.style.left = '50%';
aviso.style.transform = 'translateX(-50%)';
aviso.style.background = 'rgba(255,69,0,0.9)';
aviso.style.color = 'white';
aviso.style.padding = '10px 20px';
aviso.style.borderRadius = '10px';
aviso.style.boxShadow = '0 0 10px rgba(0,0,0,0.5)';
aviso.style.fontFamily = 'Arial, sans-serif';
aviso.style.display = 'none';
aviso.style.zIndex = '9999';
document.body.appendChild(aviso);

// quando a internet cair
window.addEventListener('offline', () => {
  aviso.style.display = 'block';
  console.warn('ConexÃ£o perdida ðŸ˜•');
});

// quando voltar, testa e recarrega automaticamente
window.addEventListener('online', async () => {
  aviso.textContent = 'ConexÃ£o restaurada! Recarregando...';
  const ok = await testarConexao();
  if (ok) location.reload();
});

// verificaÃ§Ã£o real (evita falso positivo de "online")
async function testarConexao() {
  try {
    const ctrl = new AbortController();
    setTimeout(() => ctrl.abort(), 4000);
    await fetch('https://www.google.com/favicon.ico', { method: 'HEAD', signal: ctrl.signal });
    return true;
  } catch {
    return false;
  }
}

// tambÃ©m faz checagens periÃ³dicas (a cada 15s)
setInterval(async () => {
  if (!navigator.onLine) {
    aviso.style.display = 'block';
    aviso.textContent = 'Sem conexÃ£o... tentando reconectar ðŸ”„';
  } else {
    const ok = await testarConexao();
    if (ok) aviso.style.display = 'none';
  }
}, 15000);
</script>
</body>
</html>

