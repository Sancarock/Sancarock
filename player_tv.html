<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<style>
  html, body {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    background: black;
    overflow: hidden;
    font-family: Arial, sans-serif;
  }

  .tv-container {
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100vw;
    height: 100vh; /* ocupa a tela toda */
  }

  /* Player = 40% */
  .tv-player {
    flex: 0 0 40%;
    height: 65;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .tv-player iframe {
    width: 95%;
    height: 95%;
    border: none;
  }

  /* Not√≠cias = 60% */
  #noticias {
    flex: 0 0 60%;
    color: #ffcc00;
    font-size: 1.8vw;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    padding: 0 2vw;
    box-sizing: border-box;
  }

  a {
    color: #ffcc00;
    text-decoration: none;
  }

  a:hover {
    text-decoration: underline;
  }
</style>
</head>
<body>
  
    
      <iframe src="https://player.transmissaodigital.com/player-topo-html5/6716/000000" frameborder="0" width="100%" height="70"></iframe>
   
    <div id="noticias">Carregando not√≠cias...</div>
  </div>

<script>
 const feeds = [
  'https://whiplash.net/feeds/news.xml',
  'https://www.rockbizz.com.br/noticias/feed/',
  'https://www.noticiasaominuto.com.br/rss/esporte',
  'https://g1.globo.com/rss/g1/economia/',
  'https://g1.globo.com/rss/g1/mundo/',
  'https://www.noticiasaominuto.com.br/rss/ultima-hora',
  'https://www.noticiasaominuto.com.br/rss/politica',
  'https://g1.globo.com/rss/g1/sp/sao-carlos-regiao/',
  'https://www.noticiasaominuto.com.br/rss/economia',
  'https://www.noticiasaominuto.com.br/rss/justica',
  'https://g1.globo.com/rss/g1/tecnologia/',
  'https://www.noticiasaominuto.com.br/rss/mundo'
];

const slogan = { titulo: "ü§ò Programa Monstros do Rock - Todo S√°bado √†s 20h ü§ò", url: null };

const patrocinadores = [
  { titulo: "VJ Suplementos, a melhor loja de Suplementos de S√£o Carlos", url: "https://www.instagram.com/vjsuplementos_saocarlos/" },
  { titulo: "R√°dio Sanca Rock - S√£o carlos / SP", url: null }
];

let todasNoticias = [];
const noticiasSpan = document.getElementById('noticias');

function decodeHTMLEntities(text) {
  const txt = document.createElement('textarea');
  txt.innerHTML = text;
  return txt.value.trim();
}

async function fetchRSS(url) {
  try {
    const response = await fetch(`https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(url)}`);
    const data = await response.json();
    if (data.items) {
      return data.items.map(item => ({ titulo: decodeHTMLEntities(item.title), url: item.link }));
    }
    return [];
  } catch (error) {
    console.warn(`Feed ${url} falhou, ignorando...`);
    return [];
  }
}

function shuffleArray(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}

async function carregarNoticias() {
  const resultados = await Promise.allSettled(feeds.map(feed => fetchRSS(feed)));

  let noticiasRSS = [];
  resultados.forEach(r => {
    if (r.status === 'fulfilled' && r.value.length > 0) {
      r.value.forEach(n => {
        if (!noticiasRSS.some(x => x.titulo === n.titulo)) noticiasRSS.push(n);
      });
    }
  });

  noticiasRSS = shuffleArray(noticiasRSS);
  if (noticiasRSS.length === 0) noticiasRSS.push({ titulo: "Nenhuma not√≠cia dispon√≠vel", url: null });

  todasNoticias = [];
  let noticiaIndex = 0;

  todasNoticias.push(slogan);
  shuffleArray(patrocinadores).forEach(p => todasNoticias.push(p));

  for (let i = 0; i < 5 && noticiaIndex < noticiasRSS.length; i++) {
    todasNoticias.push(noticiasRSS[noticiaIndex]);
    noticiaIndex++;
  }

  while (noticiaIndex < noticiasRSS.length) {
    todasNoticias.push(slogan);
    shuffleArray(patrocinadores).forEach(p => todasNoticias.push(p));

    for (let i = 0; i < 5 && noticiaIndex < noticiasRSS.length; i++) {
      todasNoticias.push(noticiasRSS[noticiaIndex]);
      noticiaIndex++;
    }
  }

  mostrarMensagem(0);
}

function mostrarMensagem(index) {
  noticiasSpan.style.opacity = 0;

  setTimeout(() => {
    const mensagemAtual = todasNoticias[index];
    if (mensagemAtual.url) {
      noticiasSpan.innerHTML = `<a href="${mensagemAtual.url}" target="_blank">${mensagemAtual.titulo}</a>`;
    } else {
      noticiasSpan.textContent = mensagemAtual.titulo;
    }
    noticiasSpan.style.transition = 'opacity 0.5s';
    noticiasSpan.style.opacity = 1;
  }, 500);

  setTimeout(() => {
    mostrarMensagem((index + 1) % todasNoticias.length);
  }, 10500);
}

carregarNoticias();
</script>
</body>
</html>


